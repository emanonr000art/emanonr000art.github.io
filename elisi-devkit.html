<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Elisi 小红书复刻系统</title>
  <meta name="description" content="小红书爆款复刻生成器：链接提取图片、OCR 识别、Elisi 重写 Markdown，输出可编辑卡片。">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/reelshort.css">
</head>
<body>
  <header class="site-header">
    <div class="brand">
      <span class="logo">🧭</span>
      <div class="brand-text">
        <strong>Elisi 复刻系统</strong>
        <small>从链接到卡片的完整链路</small>
      </div>
    </div>
    <nav class="nav">
      <a href="/">返回首页</a>
      <a href="#input">开始提取</a>
      <a href="#rewrite">AI 配置</a>
    </nav>
  </header>

  <main>
    <section class="hero hero-compact">
      <div class="hero-body">
        <p class="eyebrow">最小可用</p>
        <h1>输入爆款链接或截图，立即生成复刻卡片</h1>
        <p class="lede">访问链接提取图片、OCR 识别文本、Elisi 重写为 Markdown 并生成卡片。</p>
      </div>
    </section>

    <section id="input" class="section">
      <div class="section-head">
        <p class="eyebrow">素材输入</p>
        <h2>链接访问 + 手动补充</h2>
      </div>
      <div class="grid two">
        <article class="card">
          <label class="label">小红书链接</label>
          <input class="input" id="urlInput" placeholder="https://www.xiaohongshu.com/explore/xxxx" />
          <button class="btn primary" id="fetchButton">抓取图片</button>
          <p class="muted small-note">抓取失败时可使用手动图片地址或上传截图。</p>
        </article>
        <article class="card">
          <label class="label">手动图片地址（每行一个）</label>
          <textarea class="textarea" id="manualImages" rows="6" placeholder="https://...jpg"></textarea>
          <label class="label">上传截图（可选）</label>
          <input class="input" type="file" id="imageUpload" multiple accept="image/*" />
        </article>
      </div>
      <div class="card" style="margin-top: 16px;">
        <label class="label">已提取图片</label>
        <div id="imagesContainer" class="image-grid"></div>
      </div>
    </section>

    <section id="ocr" class="section">
      <div class="section-head">
        <p class="eyebrow">OCR</p>
        <h2>图片内容识别</h2>
      </div>
      <div class="grid two">
        <article class="card">
          <p class="muted">识别图片内文字，结果可直接编辑。</p>
          <button class="btn primary" id="ocrButton">执行 OCR</button>
          <p class="muted" id="ocrStatus">等待执行</p>
        </article>
        <article class="card">
          <label class="label">OCR 输出</label>
          <div id="ocrResults" class="ocr-list"></div>
        </article>
      </div>
    </section>

    <section id="rewrite" class="section">
      <div class="section-head">
        <p class="eyebrow">Elisi 重写</p>
        <h2>生成 Markdown 文本</h2>
        <p class="section-desc">支持自定义 OpenAI 兼容 Key/Model，解决无法调用 AI 的问题。</p>
      </div>
      <div class="grid two">
        <article class="card">
          <label class="label">差异化程度</label>
          <select class="select" id="diffLevel">
            <option value="low">low</option>
            <option value="medium" selected>medium</option>
            <option value="high">high</option>
          </select>
          <label class="label">Elisi 植入强度</label>
          <select class="select" id="elisiStrength">
            <option value="soft" selected>soft</option>
            <option value="medium">medium</option>
          </select>
          <label class="label">图片张数</label>
          <select class="select" id="imageCount">
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6" selected>6</option>
          </select>
        </article>
        <article class="card">
          <label class="label">AI Key（OpenAI 兼容）</label>
          <input class="input" id="apiKeyInput" placeholder="sk-..." />
          <label class="label">API Base（可选）</label>
          <input class="input" id="apiBaseInput" placeholder="https://api.openai.com/v1" />
          <label class="label">模型</label>
          <input class="input" id="apiModelInput" placeholder="gpt-4o-mini" />
          <button class="btn primary block" id="rewriteButton">生成 Markdown</button>
          <p class="muted" id="statusText">等待输入</p>
        </article>
      </div>
      <article class="card" style="margin-top: 16px;">
        <label class="label">Markdown 输出</label>
        <textarea class="textarea" id="markdownOutput" rows="10" placeholder="生成结果将显示在这里"></textarea>
      </article>
    </section>

    <section id="cards" class="section">
      <div class="section-head">
        <p class="eyebrow">卡片</p>
        <h2>根据 Markdown 生成卡片</h2>
      </div>
      <div class="cta-row">
        <button class="btn primary" id="buildCardsButton">生成卡片</button>
        <button class="btn ghost" id="downloadAllButton">下载全部卡片</button>
      </div>
      <div id="cardsContainer" class="grid three"></div>
    </section>
  </main>

  <script src="/js/elisi-app.js"></script>
</body>
</html>
