<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>小红书复刻系统开发包 · Elisi</title>
  <meta name="description" content="小红书复刻系统开发包：输入链接或手动内容，输出复刻文案、图片排版 Prompt，带 7 维评分与回炉。">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/reelshort.css">
</head>
<body>
  <header class="site-header">
    <div class="brand">
      <span class="logo">🧭</span>
      <div class="brand-text">
        <strong>Elisi 复刻系统</strong>
        <small>小红书复刻系统 · 开发包 · 端到端 Demo</small>
      </div>
    </div>
    <nav class="nav">
      <a href="#goal">系统目标</a>
      <a href="#architecture">技术架构</a>
      <a href="#api">接口文档</a>
      <a href="#prompts">Prompt 配置</a>
      <a href="#ui">前端结构</a>
      <a href="#demo">最小可用 Demo</a>
      <a href="#run">立即试跑</a>
    </nav>
  </header>

  <main>
    <section class="hero hero-compact">
      <div class="hero-body">
        <p class="eyebrow">版本 v1.0 · 页面已更新为小红书复刻系统</p>
        <h1>输入爆款链接，输出结构复刻文案与排版文字图 Prompt</h1>
        <p class="lede">从解析、生成、评分到回炉的全流程规范，已固定 Elisi 植入策略、7 维评分与自动回写阈值，便于直接落地。</p>
        <div class="cta-row">
          <a class="btn primary" href="#run">开始试跑</a>
          <a class="btn ghost" href="#api">查看接口</a>
          <span class="pill">自动回炉阈值 85 · 最多 3 轮</span>
          <span class="pill ghost">最新更新：小红书复刻系统开发包</span>
        </div>
      </div>
    </section>

    <section id="goal" class="section">
      <div class="section-head">
        <p class="eyebrow">系统目标与硬性约束</p>
        <h2>目标：高一致度复刻 + 差异化表达</h2>
        <p class="section-desc">输入小红书爆款链接，输出新的标题与正文，同时生成逐张排版文字图 Prompt，并自动完成 7 维评分回炉。</p>
      </div>
      <div class="grid three">
        <article class="card">
          <h3>输出目标</h3>
          <p class="muted">结构逻辑复刻一致度至少 80%，文案必须以个人体验叙述，且在正文内自然植入 Elisi 使用体验。</p>
        </article>
        <article class="card">
          <h3>硬性约束</h3>
          <p class="muted">文案禁止出现 Markdown 语法或项目符号标记；不得逐句照抄原文；只允许固定产品 Elisi 的可核验事实。</p>
        </article>
        <article class="card">
          <h3>评分回炉</h3>
          <p class="muted">Attention / Relevance / Empathy / Value / Trust / Reasoning / Action 七维评分，总分低于 85 自动回炉，最多 3 轮。</p>
        </article>
      </div>
    </section>

    <section id="architecture" class="section">
      <div class="section-head">
        <p class="eyebrow">推荐技术架构</p>
        <h2>前后端协同的最小可用方案</h2>
        <p class="section-desc">前端可用 Next.js 或任意 React SPA，后端建议 FastAPI 或 Express，解析与视觉理解可拆分独立服务。</p>
      </div>
      <div class="grid three">
        <article class="card">
          <h3>前端</h3>
          <p class="muted">输入区、回炉进度、最终输出三段式布局，优先直连 /api/run 完整流程。</p>
        </article>
        <article class="card">
          <h3>后端</h3>
          <p class="muted">解析服务负责抓取与兜底手动输入，主模型负责拆解、生成、评分与回炉；视觉模型负责图片提示语。</p>
        </article>
        <article class="card">
          <h3>存储</h3>
          <p class="muted">可选保存 JSON 记录，便于回放、复盘与 A/B 测试，无强制数据库依赖。</p>
        </article>
      </div>
    </section>

    <section id="api" class="section">
      <div class="section-head">
        <p class="eyebrow">后端接口文档</p>
        <h2>最小可用 API 列表</h2>
        <p class="section-desc">包含解析、生成、评分、回炉与一键跑通的统一接口，支持解析失败时切换手动输入。</p>
      </div>
      <div class="grid two">
        <article class="card">
          <h3>POST /api/parse</h3>
          <pre class="code-block">{
  "url": "https://www.xiaohongshu.com/explore/xxxx",
  "prefer": {
    "fetch_images": true,
    "fetch_comments": false
  }
}

{
  "ok": true,
  "raw": {
    "source_url": "...",
    "title": "...",
    "text": "合并后的纯文本正文（保留段落分隔符）",
    "paragraphs": ["段1", "段2"],
    "tags": ["#xxx", "#xxx"],
    "images": [
      {"url": "https://...", "id": "img1"}
    ],
    "video": null
  }
}

{
  "ok": false,
  "error": "PARSE_FAILED",
  "message": "抓取失败/需要登录/反爬拦截",
  "fallback": {
    "allow_manual_input": true
  }
}</pre>
        </article>
        <article class="card">
          <h3>POST /api/generate</h3>
          <pre class="code-block">{
  "raw": { "title": "...", "text": "..." },
  "settings": {
    "language": "zh",
    "diff_level": "medium",
    "elisi_strength": "soft",
    "image_count": 6,
    "xhs_no_markdown": true
  }
}

{
  "ok": true,
  "draft": {
    "title": "...",
    "content": "整篇小红书正文（不含markdown）",
    "image_prompts": ["prompt1", "prompt2"],
    "meta": {
      "logic_template": { "...": "..." },
      "core_points": ["必须保留要点1"],
      "elisi_injection_points": ["植入位置描述..."]
    }
  }
}</pre>
        </article>
        <article class="card">
          <h3>POST /api/score</h3>
          <pre class="code-block">{
  "draft": { "title": "...", "content": "...", "image_prompts": [] },
  "rubric_version": "v1"
}

{
  "ok": true,
  "score": {
    "total": 82,
    "dimensions": {
      "attention": {"score": 78, "why": "...", "fix": ["...","..."]},
      "relevance": {"score": 86, "why": "...", "fix": []},
      "empathy": {"score": 80, "why": "...", "fix": []},
      "value": {"score": 83, "why": "...", "fix": []},
      "trust": {"score": 70, "why": "...", "fix": []},
      "reasoning": {"score": 88, "why": "...", "fix": []},
      "action": {"score": 79, "why": "...", "fix": []}
    },
    "lowest_dimensions": ["trust", "attention"]
  }
}</pre>
        </article>
        <article class="card">
          <h3>POST /api/rewrite</h3>
          <pre class="code-block">{
  "raw": { "...": "..." },
  "draft": { "...": "..." },
  "score": { "...": "..." },
  "settings": {
    "focus_dimensions": ["trust", "attention"],
    "target_total": 85,
    "max_changes": "bounded"
  }
}

{
  "ok": true,
  "draft": { "...": "..." },
  "change_log": {
    "focus_dimensions": ["trust", "attention"],
    "changes": ["新增可信背书段落", "更强钩子标题"]
  }
}</pre>
        </article>
        <article class="card">
          <h3>POST /api/run</h3>
          <pre class="code-block">{
  "url": "...",
  "settings": { "...": "..." },
  "loop": {
    "threshold": 85,
    "max_rounds": 3
  }
}

{
  "ok": true,
  "final": { "...": "..." },
  "rounds": [
    {"round": 1, "total": 82, "draft": {"...": "..."}},
    {"round": 2, "total": 87, "draft": {"...": "..."}}
  ]
}</pre>
        </article>
      </div>
    </section>

    <section id="prompts" class="section">
      <div class="section-head">
        <p class="eyebrow">Prompt 配置</p>
        <h2>直接可用的 Prompt Pack</h2>
        <p class="section-desc">建议保存为 prompts.json，后端按 key 调用。已包含结构拆解、生成、评分、回炉与图片 Prompt 生成。</p>
      </div>
      <article class="card">
        <pre class="code-block">{
  "version": "v1",
  "system_base": "你是小红书爆款内容工程专家，擅长拆解爆款结构并用差异化表达复刻。你输出的正文必须适配小红书：不要使用任何Markdown语法，不要用项目符号'-'或'#'标题标记。所有内容必须自然、口语化、有画面感。",
  "extract_logic": {
    "name": "extract_logic",
    "prompt": "任务：拆解下面这篇小红书爆款的爆文结构，输出可复刻的骨架。\n要求：\n1 输出7部分：Attention, Relevance, Empathy, Value, Trust, Reasoning, Action。\n2 每部分输出：核心策略一句话 + 可复刻的写法模板3条 + 原文对应证据（用你自己的话转述，不要原句照抄）。\n3 再输出一份“核心要点清单”：至少8条，后续复刻必须保留。\n输入爆款内容：\n标题：{{title}}\n正文：{{content}}\n标签：{{tags}}\n"
  },
  "generate_draft": {
    "name": "generate_draft",
    "prompt": "任务：基于已拆解的爆款骨架，生成一篇新的小红书笔记。\n硬性要求：\n1 复刻逻辑一致度至少80%，核心要点必须全部覆盖。\n2 不能逐句照抄，所有小标题、措辞、句式要明显不同。\n3 必须用第一人称个人体验叙述，加入更多具体细节（时间、场景、感受、动作）。\n4 植入Elisi：以“我在用的AI规划/任务/习惯工具”的方式自然带出，说明它如何帮助我把方法拆成可执行步骤或坚持下去。不要写成广告口吻。\n5 输出只包含两段：\nA 标题（1行）\nB 正文（多段，适合小红书分段，允许emoji，但不要Markdown）\n输入：\n爆款骨架：{{logic_template}}\n必须保留的核心要点：{{core_points}}\n"
  },
  "score_rubric": {
    "name": "score_rubric",
    "prompt": "任务：对下面的小红书笔记进行7维评分，总分100。\n评分维度与说明：\n1 Attention(15)：开头0.1秒抓人、标题/封面承诺强。\n2 Relevance(15)：目标人群明确、痛点对得准。\n3 Empathy(15)：强代入感、像在说“我”。\n4 Value(15)：明确可获得的结果/方法/SOP。\n5 Trust(10)：可信背书、细节、前后对比、真实感。\n6 Reasoning(15)：反常识观点+解释闭环。\n7 Action(15)：明确促使收藏/关注/评论/私信/行动。\n要求输出JSON：\n{\n  \"total\": number,\n  \"dimensions\": {\n    \"attention\": {\"score\": number, \"why\": \"...\", \"fix\": [\"...\",\"...\"]},\n    ...\n  },\n  \"lowest_dimensions\": [\"...\",\"...\"]\n}\n待评分笔记：\n标题：{{title}}\n正文：{{content}}\n"
  },
  "rewrite_focus": {
    "name": "rewrite_focus",
    "prompt": "任务：对现有笔记进行回炉重写，让总分达到{{target_total}}以上。\n规则：\n1 不改变爆款骨架与核心要点顺序（除非为补足低分维度做局部插入）。\n2 只重点增强这些低分维度：{{focus_dimensions}}。\n3 仍然必须：不使用Markdown，不逐句照抄，保持第一人称真实体验。\n4 Elisi植入保留但更自然：强调它如何帮助拆解目标、安排任务、追踪习惯或提升执行力。\n输出：\nA 标题（1行）\nB 正文（多段）\n输入：\n原稿标题：{{title}}\n原稿正文：{{content}}\n评分报告：{{score_report}}\n核心要点：{{core_points}}\n"
  },
  "image_prompt_gen": {
    "name": "image_prompt_gen",
    "prompt": "任务：为这篇小红书笔记生成{{image_count}}张“排版+文字图”的图片生成Prompt，用于复刻爆款图的表达。\n要求：\n1 每张图对应笔记中的一个关键段落或关键要点。\n2 风格：小红书爆款排版，干净高级，留白，信息分区清晰。\n3 每张图都要包含明确的中文标题/小字要点。\n4 必须写一句：图片中文字为清晰可读的中文黑体，不出现乱码。\n5 输出格式：严格JSON数组字符串，每个元素包含：{\"scene\":\"...\",\"prompt\":\"...\",\"text_overlay\":[\"...\",\"...\"]}\n输入笔记：\n标题：{{title}}\n正文：{{content}}\n"
  }
}</pre>
      </article>
    </section>

    <section class="section">
      <div class="section-head">
        <p class="eyebrow">7 维评分细则</p>
        <h2>让评分更像真实读者</h2>
        <p class="section-desc">作为 score_rubric 的补充说明，可直接拼进 prompt。</p>
      </div>
      <div class="grid two">
        <article class="card">
          <h3>Attention / Relevance / Empathy</h3>
          <p class="muted">Attention 检查强承诺与开头吸引力，Relevance 命中人群与痛点，Empathy 强调第一人称细节与情绪共鸣。</p>
        </article>
        <article class="card">
          <h3>Value / Trust / Reasoning / Action</h3>
          <p class="muted">Value 关注可执行 SOP 与结果收益，Trust 要求真实细节与对比，Reasoning 需要反常识观点与解释闭环，Action 明确收藏关注等引导。</p>
        </article>
      </div>
    </section>

    <section class="section">
      <div class="section-head">
        <p class="eyebrow">回炉循环策略</p>
        <h2>自动回写的最小流程</h2>
        <p class="section-desc">总分不足 85 时，针对最低维度增强，最多 3 轮。</p>
      </div>
      <article class="card">
        <pre class="code-block">def run_pipeline(url, settings, threshold=85, max_rounds=3):
    raw = parse(url)
    logic = llm_extract_logic(raw)
    draft = llm_generate(raw, logic, settings)

    rounds = []
    for r in range(1, max_rounds + 1):
        score = llm_score(draft)
        rounds.append({"round": r, "total": score["total"], "draft": draft, "score": score})
        if score["total"] &gt;= threshold:
            break
        focus = score.get("lowest_dimensions", [])[:2] or ["attention"]
        draft = llm_rewrite(raw, draft, score, focus, target_total=threshold)

    final = rounds[-1]["draft"]
    return {"final": final, "rounds": rounds}</pre>
      </article>
    </section>

    <section class="section">
      <div class="section-head">
        <p class="eyebrow">Elisi 植入规范</p>
        <h2>固定事实范围与写法</h2>
        <p class="section-desc">仅允许使用可核验事实：跨平台一体化规划、任务/习惯/目标/项目/笔记模块、AI 智能规划与拆解。</p>
      </div>
      <div class="grid three">
        <article class="card">
          <h3>可说事实</h3>
          <p class="muted">跨平台多设备可用，一体化规划工具，包含任务规划、习惯追踪、目标、项目管理、笔记记录，支持 AI 辅助拆解与建议。</p>
        </article>
        <article class="card">
          <h3>写法要求</h3>
          <p class="muted">出现 1-2 次即可，以“我在用的工具”轻描淡写，不使用安利语气，绑定具体动作如拆解与复盘。</p>
        </article>
        <article class="card">
          <h3>推荐句式</h3>
          <p class="muted">我后来是用 Elisi 把这套方法拆成每天 10 分钟的小任务，才真的坚持下来。</p>
        </article>
      </div>
    </section>

    <section id="ui" class="section">
      <div class="section-head">
        <p class="eyebrow">前端页面结构</p>
        <h2>输入区 + 过程展示 + 最终输出</h2>
        <p class="section-desc">页面结构建议直接调用 /api/run，也支持分步接口便于调试。</p>
      </div>
      <div class="grid three">
        <article class="card">
          <h3>区域 1 输入区</h3>
          <p class="muted">URL 输入框、diff_level、Elisi 植入强度、图片张数、阈值与最大轮次设置、开始生成按钮。</p>
        </article>
        <article class="card">
          <h3>区域 2 过程展示</h3>
          <p class="muted">Round 1 至 Round 3 的进度条或卡片，总分与最低维度提示。</p>
        </article>
        <article class="card">
          <h3>区域 3 最终输出</h3>
          <p class="muted">标题、正文、图片 Prompts，复制按钮与评分报告一体化展示。</p>
        </article>
      </div>
    </section>

    <section id="demo" class="section">
      <div class="section-head">
        <p class="eyebrow">最小可用 Demo</p>
        <h2>先跑通手动粘贴模式</h2>
        <p class="section-desc">不做真实爬虫也能完成生成 → 评分 → 回炉 → 图片 Prompt 的完整链路。</p>
      </div>
      <article class="card">
        <pre class="code-block">POST /api/manual_raw
{
  "title": "...",
  "content": "...",
  "images": []
}</pre>
      </article>
    </section>

    <section class="section">
      <div class="section-head">
        <p class="eyebrow">任务拆分清单</p>
        <h2>三步交付路线</h2>
        <p class="section-desc">优先完成手动模式，后续再补充解析与视觉复刻。</p>
      </div>
      <div class="grid three">
        <article class="card">
          <h3>任务 A 后端 FastAPI 骨架</h3>
          <p class="muted">实现 /api/run，读取 prompts.json，调用 LLM SDK 完成生成、评分与回炉循环。</p>
        </article>
        <article class="card">
          <h3>任务 B 前端页面</h3>
          <p class="muted">输入区、输出区、回炉轮次展示与复制按钮，兼容解析失败的手动输入提示。</p>
        </article>
        <article class="card">
          <h3>任务 C 图片理解</h3>
          <p class="muted">第一阶段仅生成排版文字图 Prompt，后续再加入视觉分析复刻配色与布局。</p>
        </article>
      </div>
    </section>

    <section class="section">
      <div class="section-head">
        <p class="eyebrow">默认值确认</p>
        <h2>已设定的默认策略</h2>
        <p class="section-desc">无需额外确认即可执行。</p>
      </div>
      <div class="grid three">
        <article class="card">
          <h3>产品形态</h3>
          <p class="muted">Web 产品，Elisi 固定植入。</p>
        </article>
        <article class="card">
          <h3>图片策略</h3>
          <p class="muted">排版 + 文字图为主，默认 6 张。</p>
        </article>
        <article class="card">
          <h3>回炉策略</h3>
          <p class="muted">阈值 85，最多 3 轮。</p>
        </article>
      </div>
    </section>

    <section id="run" class="section">
      <div class="section-head">
        <p class="eyebrow">立即试跑</p>
        <h2>一键跑通 /api/run</h2>
      </div>
      <div class="grid two">
        <article class="card">
          <label class="label">爆款链接</label>
          <input class="input" id="urlInput" placeholder="https://www.xiaohongshu.com/explore/xxxx" />
          <label class="toggle">
            <input type="checkbox" id="manualToggle" />
            使用手动输入
          </label>
          <label class="label">标题（可选）</label>
          <input class="input" id="manualTitle" placeholder="可留空" />
          <label class="label">正文</label>
          <textarea class="textarea" id="manualContent" rows="8" placeholder="粘贴原始正文"></textarea>
        </article>

        <article class="card">
          <label class="label">差异化程度</label>
          <select class="select" id="diffLevel">
            <option value="low">low</option>
            <option value="medium" selected>medium</option>
            <option value="high">high</option>
          </select>
          <label class="label">Elisi 植入强度</label>
          <select class="select" id="elisiStrength">
            <option value="soft" selected>soft</option>
            <option value="medium">medium</option>
          </select>
          <label class="label">图片张数</label>
          <select class="select" id="imageCount">
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6" selected>6</option>
          </select>
          <label class="label">阈值 / 最大回炉轮次</label>
          <div class="inline-inputs">
            <input class="input" id="scoreThreshold" type="number" value="85" />
            <input class="input" id="maxRounds" type="number" value="3" />
          </div>
          <button class="btn primary block" id="runButton">开始生成</button>
          <p class="muted" id="statusText">等待输入</p>
        </article>
      </div>
    </section>

    <section class="section">
      <div class="section-head">
        <p class="eyebrow">过程展示</p>
        <h2>回炉轮次</h2>
      </div>
      <div id="roundsContainer" class="grid three"></div>
    </section>

    <section class="section">
      <div class="section-head">
        <p class="eyebrow">最终输出</p>
        <h2>标题、正文、图片 Prompt 与评分报告</h2>
      </div>
      <div class="grid two">
        <article class="card">
          <div class="copy-row">
            <div>
              <label class="label">标题</label>
              <p id="resultTitle">—</p>
            </div>
            <button class="btn ghost" data-copy="title">复制标题</button>
          </div>
          <div class="copy-row">
            <div style="flex: 1;">
              <label class="label">正文</label>
              <pre class="code-block" id="resultContent">—</pre>
            </div>
            <button class="btn ghost" data-copy="content">复制正文</button>
          </div>
        </article>
        <article class="card">
          <div class="copy-row">
            <label class="label">图片 Prompts</label>
            <button class="btn ghost" data-copy="prompts">一键复制</button>
          </div>
          <div id="promptList" class="prompt-list"></div>
        </article>
      </div>
      <article class="card" style="margin-top: 16px;">
        <label class="label">评分报告</label>
        <pre class="code-block" id="scoreReport">—</pre>
      </article>
    </section>
  </main>

  <script src="/js/elisi-app.js"></script>
</body>
</html>
